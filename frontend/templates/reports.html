<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Report Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
  <a href="{{ url_for('index') }}" class="btn btn-secondary mb-3">‚Üê Back to Dashboard</a>

  <div class="card shadow-sm">
    <div class="card-body">
      {% if report.error %}
        <div class="alert alert-danger">{{ report.error }}</div>
      {% else %}
        <h2 class="mb-3">Report for {{ report.image }}</h2>
        <p><strong>Elapsed Time:</strong> {{ report.elapsed }} sec</p>

        <!-- Vulnerability Summary -->
        <div class="row">
          <div class="col-md-3"><div class="alert alert-secondary">LOW: {{ report.summary.LOW }}</div></div>
          <div class="col-md-3"><div class="alert alert-warning">MEDIUM: {{ report.summary.MEDIUM }}</div></div>
          <div class="col-md-3"><div class="alert alert-danger">HIGH: {{ report.summary.HIGH }}</div></div>
          <div class="col-md-3"><div class="alert alert-dark">CRITICAL: {{ report.summary.CRITICAL }}</div></div>
        </div>

        <!-- Raw JSON -->
        <h4 class="mt-4">Raw JSON Report</h4>
        <pre class="bg-dark text-white p-3 rounded" style="max-height: 400px; overflow-y: auto;">
{{ report.report | tojson(indent=2) }}
        </pre>
      {% endif %}
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
